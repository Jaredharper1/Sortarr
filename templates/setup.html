<!doctype html>
<html lang="en" data-theme="dark">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>{{ app_name }} Setup</title>
    <link rel="icon" type="image/svg+xml" href="/static/favicon.svg">
    <link rel="stylesheet" href="/static/styles.css?v={{ app_version }}" />
    <link rel="stylesheet" href="/static/setup.css?v={{ app_version }}" />
  </head>
  <body>
    <div class="setup-wrap">
      <div class="setup-card">
        <div class="setup-header">
          <img class="setup-logo" src="/static/logo.svg" alt="{{ app_name }}" />
          <div>
            <div class="setup-title">{{ app_name }} Setup v{{ app_version }}</div>
            <div class="setup-sub">Add Sonarr/Radarr details. Tautulli is optional for playback stats.</div>
          </div>
        </div>

        {% if error %}
        <div class="setup-error">{{ error }}</div>
        {% endif %}

        <form method="post" class="setup-form">
          <div class="setup-section-title">Sonarr Instance 1</div>
          <label>
            Instance name
            <input name="sonarr_name" placeholder="Regular / Standard / Live Action (example names only; optional unless instance 2 or 3 is configured)" value="{{ values.sonarr_name }}" />
          </label>
          <label>
            Sonarr URL
            <input name="sonarr_url" placeholder="http://192.168.1.120:8989" value="{{ values.sonarr_url }}" />
          </label>
          <label>
            Sonarr API key
            <input name="sonarr_api_key" placeholder="your-api-key" value="{{ values.sonarr_api_key }}" />
          </label>
          <div class="setup-inline">
            <button
              class="setup-test"
              type="button"
              data-kind="sonarr"
              data-url-id="sonarr_url"
              data-key-id="sonarr_api_key"
              data-inline-key="sonarr_1"
            >
              Test connection
            </button>
            <span
              class="setup-inline-message{% if field_errors.get('sonarr_1') %} is-error{% else %} hidden{% endif %}"
              data-inline="sonarr_1"
            >{{ field_errors.get('sonarr_1', '') }}</span>
          </div>

          <details class="setup-advanced">
            <summary>Advanced Sonarr instances</summary>
            <div class="setup-advanced-body">
              <div class="setup-section-title">Sonarr Instance 2 (optional)</div>
              <label>
                Instance name
                <input name="sonarr_name_2" placeholder="4k / Anime / Cartoons" value="{{ values.sonarr_name_2 }}" />
              </label>
              <label>
                Sonarr URL
                <input name="sonarr_url_2" placeholder="http://192.168.1.120:8989" value="{{ values.sonarr_url_2 }}" />
              </label>
              <label>
                Sonarr API key
                <input name="sonarr_api_key_2" placeholder="your-api-key" value="{{ values.sonarr_api_key_2 }}" />
              </label>
              <div class="setup-inline">
                <button
                  class="setup-test"
                  type="button"
                  data-kind="sonarr"
                  data-url-id="sonarr_url_2"
                  data-key-id="sonarr_api_key_2"
                  data-inline-key="sonarr_2"
                >
                  Test connection
                </button>
                <span
                  class="setup-inline-message{% if field_errors.get('sonarr_2') %} is-error{% else %} hidden{% endif %}"
                  data-inline="sonarr_2"
                >{{ field_errors.get('sonarr_2', '') }}</span>
              </div>

              <div class="setup-section-title">Sonarr Instance 3 (optional)</div>
              <label>
                Instance name
                <input name="sonarr_name_3" placeholder="4k / Anime / Cartoons" value="{{ values.sonarr_name_3 }}" />
              </label>
              <label>
                Sonarr URL
                <input name="sonarr_url_3" placeholder="http://192.168.1.120:8989" value="{{ values.sonarr_url_3 }}" />
              </label>
              <label>
                Sonarr API key
                <input name="sonarr_api_key_3" placeholder="your-api-key" value="{{ values.sonarr_api_key_3 }}" />
              </label>
              <div class="setup-inline">
                <button
                  class="setup-test"
                  type="button"
                  data-kind="sonarr"
                  data-url-id="sonarr_url_3"
                  data-key-id="sonarr_api_key_3"
                  data-inline-key="sonarr_3"
                >
                  Test connection
                </button>
                <span
                  class="setup-inline-message{% if field_errors.get('sonarr_3') %} is-error{% else %} hidden{% endif %}"
                  data-inline="sonarr_3"
                >{{ field_errors.get('sonarr_3', '') }}</span>
              </div>
              <div class="setup-hint">If you add another Sonarr instance, name all configured Sonarr instances so chips and columns stay clear.</div>
            </div>
          </details>

          <div class="setup-section-title">Radarr Instance 1</div>
          <label>
            Instance name
            <input name="radarr_name" placeholder="Regular / Standard / Live Action (example names only; optional unless instance 2 or 3 is configured)" value="{{ values.radarr_name }}" />
          </label>
          <label>
            Radarr URL
            <input name="radarr_url" placeholder="http://192.168.1.120:7878" value="{{ values.radarr_url }}" />
          </label>
          <label>
            Radarr API key
            <input name="radarr_api_key" placeholder="your-api-key" value="{{ values.radarr_api_key }}" />
          </label>
          <div class="setup-inline">
            <button
              class="setup-test"
              type="button"
              data-kind="radarr"
              data-url-id="radarr_url"
              data-key-id="radarr_api_key"
              data-inline-key="radarr_1"
            >
              Test connection
            </button>
            <span
              class="setup-inline-message{% if field_errors.get('radarr_1') %} is-error{% else %} hidden{% endif %}"
              data-inline="radarr_1"
            >{{ field_errors.get('radarr_1', '') }}</span>
          </div>

          <details class="setup-advanced">
            <summary>Advanced Radarr instances</summary>
            <div class="setup-advanced-body">
              <div class="setup-section-title">Radarr Instance 2 (optional)</div>
              <label>
                Instance name
                <input name="radarr_name_2" placeholder="4k / Anime / Cartoons" value="{{ values.radarr_name_2 }}" />
              </label>
              <label>
                Radarr URL
                <input name="radarr_url_2" placeholder="http://192.168.1.120:7878" value="{{ values.radarr_url_2 }}" />
              </label>
              <label>
                Radarr API key
                <input name="radarr_api_key_2" placeholder="your-api-key" value="{{ values.radarr_api_key_2 }}" />
              </label>
              <div class="setup-inline">
                <button
                  class="setup-test"
                  type="button"
                  data-kind="radarr"
                  data-url-id="radarr_url_2"
                  data-key-id="radarr_api_key_2"
                  data-inline-key="radarr_2"
                >
                  Test connection
                </button>
                <span
                  class="setup-inline-message{% if field_errors.get('radarr_2') %} is-error{% else %} hidden{% endif %}"
                  data-inline="radarr_2"
                >{{ field_errors.get('radarr_2', '') }}</span>
              </div>

              <div class="setup-section-title">Radarr Instance 3 (optional)</div>
              <label>
                Instance name
                <input name="radarr_name_3" placeholder="4k / Anime / Cartoons" value="{{ values.radarr_name_3 }}" />
              </label>
              <label>
                Radarr URL
                <input name="radarr_url_3" placeholder="http://192.168.1.120:7878" value="{{ values.radarr_url_3 }}" />
              </label>
              <label>
                Radarr API key
                <input name="radarr_api_key_3" placeholder="your-api-key" value="{{ values.radarr_api_key_3 }}" />
              </label>
              <div class="setup-inline">
                <button
                  class="setup-test"
                  type="button"
                  data-kind="radarr"
                  data-url-id="radarr_url_3"
                  data-key-id="radarr_api_key_3"
                  data-inline-key="radarr_3"
                >
                  Test connection
                </button>
                <span
                  class="setup-inline-message{% if field_errors.get('radarr_3') %} is-error{% else %} hidden{% endif %}"
                  data-inline="radarr_3"
                >{{ field_errors.get('radarr_3', '') }}</span>
              </div>
              <div class="setup-hint">If you add another Radarr instance, name all configured Radarr instances so chips and columns stay clear.</div>
            </div>
          </details>

          <div class="setup-section-title">Tautulli (optional)</div>
          <label>
            Tautulli URL
            <input name="tautulli_url" placeholder="http://192.168.1.120:8181" value="{{ values.tautulli_url }}" />
          </label>
          <label>
            Tautulli API key
            <input name="tautulli_api_key" placeholder="optional" value="{{ values.tautulli_api_key }}" />
          </label>
          <div class="setup-inline">
            <button
              class="setup-test"
              type="button"
              data-kind="tautulli"
              data-url-id="tautulli_url"
              data-key-id="tautulli_api_key"
              data-inline-key="tautulli"
            >
              Test connection
            </button>
            <span
              class="setup-inline-message{% if field_errors.get('tautulli') %} is-error{% else %} hidden{% endif %}"
              data-inline="tautulli"
            >{{ field_errors.get('tautulli', '') }}</span>
          </div>

          <div class="setup-section-title">Security</div>
          <label>
            Basic auth username
            <input name="basic_auth_user" placeholder="optional" value="{{ values.basic_auth_user }}" />
          </label>
          <label>
            Basic auth password
            <input name="basic_auth_pass" type="password" placeholder="optional" value="" autocomplete="new-password" />
          </label>
          <label class="setup-checkbox">
            <input type="checkbox" name="clear_basic_auth_pass" value="1" />
            <span>Clear existing password</span>
          </label>
          <div class="setup-hint">Leave blank to keep current password.</div>

          <div class="setup-section-title">Performance</div>
          <label>
            Cache seconds
            <input name="cache_seconds" type="number" min="30" step="1" value="{{ values.cache_seconds }}" />
          </label>

          <div class="setup-hint">Env file path: {{ env_path }}</div>
          <button class="setup-submit" type="submit">Save and continue</button>
        </form>
      </div>
    </div>
    <script src="/static/setup.js?v={{ app_version }}"></script>
  </body>
</html>

